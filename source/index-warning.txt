.. _intellij-index-warning:

=====================
Missing Index Warning
=====================

.. default-domain:: mongodb

.. meta:: 
   :description: The MongoDB for IntelliJ Plugin examines Java code for missing indexes.

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Definition
----------

The {+intellij-full+} examines application queries for index use. If a
query doesn't use an index, the plugin displays a warning.

To resolve the warning, create an index for the query. You can also
disable the warning.

Before you add an index, consider if:

- the query runs often enough to justify reducing the write speed
  for faster reads.
- you can change the query to use an existing index.

For more information about indexes, see :ref:`manual-create-an-index`.

Example
-------

In the following example Java code snippet, the ``awards.text`` document
field is used in a query, but there is no index on the field:

.. code-block:: java
   :copyable: false
   :emphasize-lines: 2

   client.getDatabase( "sample_database" ).getCollection( "movies" ).find(
      Filters.ne( "awards.text", "Comedy" )
   )

The plugin shows a missing index warning:

.. code-block:: none
   :copyable: false

   This query will run without an index. If you plan on using this
   query heavily in your application, you should create an index that
   covers this query.
   
   Implement an Index

Create an Index
~~~~~~~~~~~~~~~

To create an index for the query, click the :guilabel:`Implement an
Index` link displayed below the missing index warning in the plugin. The
plugin displays the :guilabel:`Database Explorer Playgrounds` screen
with template code that shows the recommended fields for a new index.
For example:

.. code-block:: java
   :copyable: false

   // Potential fields to consider indexing: awards.text
   // Learn about creating an index: https://www.mongodb.com/docs/v7.0/core/data-model-operations/#indexes
   db.getSiblingDB("sample_database").getCollection("movies")
   .createIndex({ "<your_field_1>": 1 })

To create the index on the ``awards.text`` field, set ``<your_field_1>``
to ``awards.text`` and run the :method:`~db.collection.createIndex()`
method in the  :guilabel:`Database Explorer Playgrounds` screen.

Disable Index Warning
~~~~~~~~~~~~~~~~~~~~~

To disable the index warning in the plugin:

1. Go to :guilabel:`Settings`.
#. Search for :guilabel:`Inspections`.
#. Go to :guilabel:`MongoDB`.
#. Enable :guilabel:`Query does not use an index`.

Learn More
----------

- :ref:`intellij-connect`
- :ref:`intellij-autocomplete`
- :ref:`intellij-type-validation`
