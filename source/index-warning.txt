.. _intellij-index-warning:

=====================
Missing Index Warning
=====================

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

Definition
----------

The {+intellij-full+} analyzes queries in your application to examine if
the queries use an index. If a query does not use an index, the plugin
shows a warning that indicates the query doesn't use an index.

To resolve the warning, create an index for the query or disable the
warning.

Before adding an index, consider:

- Does the query run often enough that you are willing to reduce the
  write speed for faster reads?
- Is there a way to write the query to use existing indexes? 

Example
-------

In the following example Java code snippet, the ``dispute.status`` field
is used in a query, but there is no index on the field:

.. code-block:: java
   :copyable: false
   :emphasize-lines: 3

   public List<Document> findAllPending DisputesByTypeFare() {
      return trips.find( Filters.and(
         Filters.eq( fieldName: "dispute.status", value: "pending" ),
         Filters.eq( fieldName: "dispute.type", value: "fare" )
      )).into( new ArrayList<> () );
   }

The plugin shows a missing index warning:

``This query will run without an index. If you plan on using this query
heavily in your application, you should create an index that covers this
query.``

The warning also shows a clickable *quick action* to implement an index
for the query.

Create an Index
~~~~~~~~~~~~~~~

To create an index for the query, click the *Implement an Index* quick
action in the warning. You will then see the Database Explorer
Playgrounds screen with template code to create an index. In the first
line of comments you'll see recommended fields to index, which you can
copy and paste into the template directly and run the Playground to
create the indexes.

Disable Warning
~~~~~~~~~~~~~~~

To disable the index warning, go to Settings > search for Inspections >
MongoDB > uncheck Query does not use an index.

Learn More
----------

- :ref:`intellij-connect`
- :ref:`intellij-autocomplete`
- :ref:`intellij-type-validation`
